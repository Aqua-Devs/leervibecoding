{% extends "base.html" %}

{% block title %}Leeromgeving - Blueprints & Oefenruimte | LeerVibeCoding{% endblock %}
{% block meta_description %}Jouw leeromgeving met toegang tot alle blueprints, de oefenruimte en exclusieve workflows.{% endblock %}

{% block extra_css %}
<style>
/* Dashboard Header */
.dashboard-header {
    padding: 80px 0 40px;
    border-bottom: 1px solid var(--border);
}

.dashboard-header-inner {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
}

.dashboard-title {
    display: flex;
    align-items: center;
    gap: 16px;
}

.dashboard-title h1 {
    font-size: 32px;
    font-weight: 800;
    margin: 0;
}

.premium-badge-small {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    background: var(--primary);
    color: white;
    font-weight: 600;
    font-size: 12px;
}

.dashboard-stats {
    display: flex;
    gap: 20px;
}

.stat-item {
    text-align: center;
    padding: 14px 20px;
    background: var(--card);
    border: 1px solid var(--border);
}

.stat-value {
    font-size: 24px;
    font-weight: 700;
    color: var(--primary);
}

.stat-label {
    font-size: 11px;
    color: var(--text3);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Tab Navigation */
.dashboard-tabs {
    display: flex;
    gap: 8px;
    padding: 20px 0;
    border-bottom: 1px solid var(--border);
    overflow-x: auto;
}

.dashboard-tab {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 20px;
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--text2);
    font-weight: 500;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}

.dashboard-tab:hover {
    background: var(--bg3);
    color: var(--text);
}

.dashboard-tab.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.dashboard-tab .count {
    background: rgba(255,255,255,0.2);
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 11px;
}

/* Content Sections */
.dashboard-content {
    padding: 40px 0;
}

.content-section {
    display: none;
}

.content-section.active {
    display: block;
}

/* API Key Setup */
.api-setup-card {
    background: var(--card);
    border: 1px solid var(--primary);
    padding: 28px;
    margin-bottom: 40px;
    display: flex;
    align-items: center;
    gap: 24px;
    flex-wrap: wrap;
}

.api-setup-icon {
    width: 56px;
    height: 56px;
    background: var(--primary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: white;
    flex-shrink: 0;
}

.api-setup-content {
    flex: 1;
    min-width: 200px;
}

.api-setup-content h3 {
    font-size: 18px;
    margin-bottom: 6px;
}

.api-setup-content p {
    color: var(--text2);
    font-size: 14px;
    margin: 0;
}

.api-setup-actions {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

.api-status {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    font-size: 13px;
    font-weight: 500;
}

.api-status.connected {
    background: var(--green-light);
    color: var(--green);
}

.api-status.disconnected {
    background: var(--primary-light);
    color: var(--primary);
}

/* Blueprints Grid */
.blueprints-filter {
    display: flex;
    gap: 10px;
    margin-bottom: 28px;
    flex-wrap: wrap;
}

.filter-btn {
    padding: 8px 18px;
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--text2);
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
}

.filter-btn:hover,
.filter-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.blueprints-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

.blueprint-card {
    background: var(--card);
    border: 1px solid var(--border);
    overflow: hidden;
    transition: all 0.2s;
    cursor: pointer;
}

.blueprint-card:hover {
    border-color: var(--primary);
}

.blueprint-image {
    height: 120px;
    background: var(--bg2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40px;
    position: relative;
}

.blueprint-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 4px 10px;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
}

.blueprint-badge.new {
    background: var(--green);
    color: white;
}

.blueprint-badge.popular {
    background: var(--primary);
    color: white;
}

.blueprint-content {
    padding: 20px;
}

.blueprint-category {
    display: inline-block;
    padding: 4px 10px;
    background: var(--primary-light);
    color: var(--primary);
    font-size: 11px;
    font-weight: 600;
    margin-bottom: 10px;
}

.blueprint-card h3 {
    font-size: 16px;
    margin-bottom: 8px;
}

.blueprint-card p {
    color: var(--text2);
    font-size: 13px;
    line-height: 1.5;
    margin-bottom: 14px;
}

.blueprint-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    color: var(--text3);
}

.blueprint-meta .time {
    display: flex;
    align-items: center;
    gap: 4px;
    color: var(--green);
}

.blueprint-meta .difficulty {
    display: flex;
    gap: 2px;
}

.blueprint-meta .difficulty i {
    color: var(--yellow);
}

.blueprint-meta .difficulty i.empty {
    opacity: 0.3;
}

/* Oefenruimte Launcher */
.oefenruimte-launcher {
    background: var(--card);
    border: 1px solid var(--primary);
    padding: 48px;
    text-align: center;
}

.oefenruimte-launcher h2 {
    font-size: 28px;
    margin-bottom: 12px;
}

.oefenruimte-launcher p {
    color: var(--text2);
    font-size: 16px;
    max-width: 550px;
    margin: 0 auto 28px;
}

.launch-btn {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    padding: 18px 40px;
    background: var(--primary);
    color: white;
    font-size: 16px;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.2s;
}

.launch-btn:hover {
    background: var(--primary-dark);
}

.oefenruimte-features {
    display: flex;
    justify-content: center;
    gap: 32px;
    margin-top: 32px;
    flex-wrap: wrap;
}

.oefenruimte-feature {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text2);
    font-size: 14px;
}

.oefenruimte-feature i {
    color: var(--green);
}

/* Workflows Section */
.workflows-grid {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.workflow-card {
    background: var(--card);
    border: 1px solid var(--border);
    padding: 24px;
    display: flex;
    align-items: center;
    gap: 20px;
    transition: all 0.2s;
}

.workflow-card:hover {
    border-color: var(--primary);
}

.workflow-icon {
    width: 56px;
    height: 56px;
    background: var(--bg2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    flex-shrink: 0;
}

.workflow-content {
    flex: 1;
}

.workflow-content h3 {
    font-size: 16px;
    margin-bottom: 4px;
}

.workflow-content p {
    color: var(--text2);
    font-size: 13px;
    margin: 0;
}

.workflow-badge {
    padding: 6px 12px;
    background: var(--primary-light);
    color: var(--primary);
    font-size: 12px;
    font-weight: 600;
}

/* Settings Section */
.settings-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 24px;
}

.settings-card {
    background: var(--card);
    border: 1px solid var(--border);
    padding: 28px;
}

.settings-card h3 {
    font-size: 18px;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.settings-card h3 i {
    color: var(--primary);
}

.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 0;
    border-bottom: 1px solid var(--border);
}

.setting-item:last-child {
    border-bottom: none;
}

.setting-label {
    font-size: 14px;
}

.setting-label small {
    display: block;
    color: var(--text3);
    font-size: 12px;
    margin-top: 2px;
}

/* Blueprint Modal */
.blueprint-modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    z-index: 2000;
    align-items: flex-start;
    justify-content: center;
    padding: 40px 20px;
    overflow-y: auto;
}

.blueprint-modal-overlay.active {
    display: flex;
}

.blueprint-modal {
    background: var(--card);
    border: 1px solid var(--border);
    max-width: 800px;
    width: 100%;
    position: relative;
}

.modal-header {
    padding: 28px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: flex-start;
    gap: 20px;
}

.modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: var(--bg2);
    border: none;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--text3);
    font-size: 18px;
}

.modal-icon {
    width: 64px;
    height: 64px;
    background: var(--bg2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    flex-shrink: 0;
}

.modal-title h2 {
    font-size: 24px;
    margin-bottom: 8px;
}

.modal-title p {
    color: var(--text2);
    font-size: 14px;
    margin: 0;
}

.modal-body {
    padding: 28px;
}

.modal-section {
    margin-bottom: 28px;
}

.modal-section:last-child {
    margin-bottom: 0;
}

.modal-section h4 {
    font-size: 14px;
    margin-bottom: 12px;
    color: var(--text3);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.feature-list {
    list-style: none;
}

.feature-list li {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 0;
    font-size: 14px;
    border-bottom: 1px solid var(--border);
}

.feature-list li:last-child {
    border-bottom: none;
}

.feature-list i {
    color: var(--primary);
}

.use-blueprint-btn {
    width: 100%;
    padding: 16px;
    background: var(--primary);
    color: white;
    border: none;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: background 0.2s;
}

.use-blueprint-btn:hover {
    background: var(--primary-dark);
}

/* Responsive */
@media (max-width: 900px) {
    .blueprints-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    .settings-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .dashboard-header {
        padding: 70px 0 30px;
    }
    .dashboard-header-inner {
        flex-direction: column;
        align-items: flex-start;
    }
    .dashboard-title h1 {
        font-size: 24px;
    }
    .dashboard-stats {
        width: 100%;
        justify-content: space-between;
    }
    .api-setup-card {
        flex-direction: column;
        text-align: center;
    }
    .oefenruimte-launcher {
        padding: 32px 20px;
    }
    .oefenruimte-launcher h2 {
        font-size: 22px;
    }
}

@media (max-width: 600px) {
    .blueprints-grid {
        grid-template-columns: 1fr;
    }
    .dashboard-tabs {
        gap: 6px;
    }
    .dashboard-tab {
        padding: 10px 14px;
        font-size: 13px;
    }
    .workflow-card {
        flex-direction: column;
        text-align: center;
    }
    .launch-btn {
        width: 100%;
        justify-content: center;
    }
}
</style>
{% endblock %}

{% block content %}
<!-- Dashboard Header -->
<section class="dashboard-header">
    <div class="container">
        <div class="dashboard-header-inner">
            <div class="dashboard-title">
                <h1>Welkom terug! üëã</h1>
                <span class="premium-badge-small"><i class="fas fa-crown"></i> Premium</span>
            </div>
            <div class="dashboard-stats">
                <div class="stat-item">
                    <div class="stat-value">54</div>
                    <div class="stat-label">Blueprints</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">12</div>
                    <div class="stat-label">Workflows</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">‚àû</div>
                    <div class="stat-label">API Calls</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Tab Navigation -->
<div class="container">
    <div class="dashboard-tabs">
        <div class="dashboard-tab active" onclick="showSection('blueprints')">
            <i class="fas fa-cube"></i> Blueprints <span class="count">54</span>
        </div>
        <div class="dashboard-tab" onclick="showSection('oefenruimte')">
            <i class="fas fa-laptop-code"></i> Oefenruimte
        </div>
        <div class="dashboard-tab" onclick="showSection('workflows')">
            <i class="fas fa-project-diagram"></i> Workflows <span class="count">12</span>
        </div>
        <div class="dashboard-tab" onclick="showSection('settings')">
            <i class="fas fa-cog"></i> Instellingen
        </div>
    </div>
</div>

<!-- Dashboard Content -->
<div class="dashboard-content">
    <div class="container">
        <!-- API Key Setup Banner -->
        <div class="api-setup-card" id="apiSetupCard">
            <div class="api-setup-icon">üîë</div>
            <div class="api-setup-content">
                <h3>Bring Your Own Key (BYOK)</h3>
                <p>Gebruik je eigen OpenAI API key voor onbeperkte toegang. Jouw key, jouw controle.</p>
            </div>
            <div class="api-setup-actions">
                <div class="api-status disconnected" id="apiStatusBadge">
                    <i class="fas fa-exclamation-circle"></i> Niet verbonden
                </div>
                <button class="btn btn-primary" onclick="openApiKeyModal()">
                    <i class="fas fa-key"></i> API Key instellen
                </button>
            </div>
        </div>

        <!-- Blueprints Section -->
        <div class="content-section active" id="blueprints-section">
            <div class="blueprints-filter">
                <button class="filter-btn active" onclick="filterBlueprints('all')">Alles</button>
                <button class="filter-btn" onclick="filterBlueprints('website')">Websites</button>
                <button class="filter-btn" onclick="filterBlueprints('dashboard')">Dashboards</button>
                <button class="filter-btn" onclick="filterBlueprints('ecommerce')">E-commerce</button>
                <button class="filter-btn" onclick="filterBlueprints('tool')">Tools</button>
                <button class="filter-btn" onclick="filterBlueprints('api')">API's</button>
            </div>

            <div class="blueprints-grid">
                <div class="blueprint-card" onclick="openBlueprint('webshop')" data-category="ecommerce">
                    <div class="blueprint-image">üõí<span class="blueprint-badge popular">Populair</span></div>
                    <div class="blueprint-content">
                        <span class="blueprint-category">E-commerce</span>
                        <h3>Complete Webshop</h3>
                        <p>Productpagina's, winkelwagen, checkout en betalingsflow.</p>
                        <div class="blueprint-meta">
                            <span class="time"><i class="fas fa-clock"></i> 15 min</span>
                            <span class="difficulty"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star empty"></i></span>
                        </div>
                    </div>
                </div>

                <div class="blueprint-card" onclick="openBlueprint('dashboard')" data-category="dashboard">
                    <div class="blueprint-image">üìä<span class="blueprint-badge new">Nieuw</span></div>
                    <div class="blueprint-content">
                        <span class="blueprint-category">Dashboard</span>
                        <h3>Analytics Dashboard</h3>
                        <p>Real-time grafieken, KPI's en interactieve data-visualisaties.</p>
                        <div class="blueprint-meta">
                            <span class="time"><i class="fas fa-clock"></i> 10 min</span>
                            <span class="difficulty"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star empty"></i></span>
                        </div>
                    </div>
                </div>

                <div class="blueprint-card" onclick="openBlueprint('blog')" data-category="website">
                    <div class="blueprint-image">‚úçÔ∏è<span class="blueprint-badge popular">Populair</span></div>
                    <div class="blueprint-content">
                        <span class="blueprint-category">Content</span>
                        <h3>SEO Blog Engine</h3>
                        <p>Blog met categorie√´n, tags, sitemap en automatische meta-tags.</p>
                        <div class="blueprint-meta">
                            <span class="time"><i class="fas fa-clock"></i> 20 min</span>
                            <span class="difficulty"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>

                <div class="blueprint-card" onclick="openBlueprint('booking')" data-category="tool">
                    <div class="blueprint-image">üìÖ</div>
                    <div class="blueprint-content">
                        <span class="blueprint-category">Booking</span>
                        <h3>Afspraken Systeem</h3>
                        <p>Kalender, tijdslots, bevestigingsmails en herinneringen.</p>
                        <div class="blueprint-meta">
                            <span class="time"><i class="fas fa-clock"></i> 12 min</span>
                            <span class="difficulty"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star empty"></i></span>
                        </div>
                    </div>
                </div>

                <div class="blueprint-card" onclick="openBlueprint('crm')" data-category="dashboard">
                    <div class="blueprint-image">üë•</div>
                    <div class="blueprint-content">
                        <span class="blueprint-category">CRM</span>
                        <h3>Klanten CRM</h3>
                        <p>Contactbeheer, deals tracking en communicatiegeschiedenis.</p>
                        <div class="blueprint-meta">
                            <span class="time"><i class="fas fa-clock"></i> 18 min</span>
                            <span class="difficulty"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>

                <div class="blueprint-card" onclick="openBlueprint('api')" data-category="api">
                    <div class="blueprint-image">‚ö°<span class="blueprint-badge new">Nieuw</span></div>
                    <div class="blueprint-content">
                        <span class="blueprint-category">Backend</span>
                        <h3>REST API</h3>
                        <p>Complete API met auth, CRUD endpoints en documentatie.</p>
                        <div class="blueprint-meta">
                            <span class="time"><i class="fas fa-clock"></i> 25 min</span>
                            <span class="difficulty"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>

                <div class="blueprint-card" onclick="openBlueprint('landing')" data-category="website">
                    <div class="blueprint-image">üöÄ</div>
                    <div class="blueprint-content">
                        <span class="blueprint-category">Marketing</span>
                        <h3>Landing Page</h3>
                        <p>Converterende landingspagina met lead capture en analytics.</p>
                        <div class="blueprint-meta">
                            <span class="time"><i class="fas fa-clock"></i> 8 min</span>
                            <span class="difficulty"><i class="fas fa-star"></i><i class="fas fa-star empty"></i><i class="fas fa-star empty"></i></span>
                        </div>
                    </div>
                </div>

                <div class="blueprint-card" onclick="openBlueprint('invoice')" data-category="tool">
                    <div class="blueprint-image">üßæ</div>
                    <div class="blueprint-content">
                        <span class="blueprint-category">Finance</span>
                        <h3>Factuur Generator</h3>
                        <p>Professionele facturen maken en als PDF exporteren.</p>
                        <div class="blueprint-meta">
                            <span class="time"><i class="fas fa-clock"></i> 10 min</span>
                            <span class="difficulty"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star empty"></i></span>
                        </div>
                    </div>
                </div>

                <div class="blueprint-card" onclick="openBlueprint('portfolio')" data-category="website">
                    <div class="blueprint-image">üé®</div>
                    <div class="blueprint-content">
                        <span class="blueprint-category">Portfolio</span>
                        <h3>Portfolio Website</h3>
                        <p>Showcase je werk met projectgalerij en contactformulier.</p>
                        <div class="blueprint-meta">
                            <span class="time"><i class="fas fa-clock"></i> 12 min</span>
                            <span class="difficulty"><i class="fas fa-star"></i><i class="fas fa-star empty"></i><i class="fas fa-star empty"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Oefenruimte Section -->
        <div class="content-section" id="oefenruimte-section">
            <div class="oefenruimte-launcher">
                <h2>üß™ De Oefenruimte</h2>
                <p>Experimenteer met AI-assisted coding in een veilige omgeving. Bouw, test en leer zonder risico.</p>
                <a href="/studio" class="launch-btn">
                    <i class="fas fa-rocket"></i> Open Oefenruimte
                </a>
                <div class="oefenruimte-features">
                    <div class="oefenruimte-feature"><i class="fas fa-check"></i> Live code preview</div>
                    <div class="oefenruimte-feature"><i class="fas fa-check"></i> AI code suggesties</div>
                    <div class="oefenruimte-feature"><i class="fas fa-check"></i> Export naar project</div>
                    <div class="oefenruimte-feature"><i class="fas fa-check"></i> Geen setup nodig</div>
                </div>
            </div>
        </div>

        <!-- Workflows Section -->
        <div class="content-section" id="workflows-section">
            <div class="workflows-grid">
                <div class="workflow-card">
                    <div class="workflow-icon">üöÄ</div>
                    <div class="workflow-content">
                        <h3>SaaS MVP in een Weekend</h3>
                        <p>Complete workflow: landing page, auth, dashboard, Stripe payments.</p>
                    </div>
                    <span class="workflow-badge">6 stappen</span>
                </div>
                <div class="workflow-card">
                    <div class="workflow-icon">üì±</div>
                    <div class="workflow-content">
                        <h3>Mobile-First Webshop</h3>
                        <p>Van product listing tot checkout, geoptimaliseerd voor mobiel.</p>
                    </div>
                    <span class="workflow-badge">8 stappen</span>
                </div>
                <div class="workflow-card">
                    <div class="workflow-icon">üìä</div>
                    <div class="workflow-content">
                        <h3>Data Dashboard Setup</h3>
                        <p>API integratie, grafieken en real-time updates.</p>
                    </div>
                    <span class="workflow-badge">5 stappen</span>
                </div>
                <div class="workflow-card">
                    <div class="workflow-icon">ü§ñ</div>
                    <div class="workflow-content">
                        <h3>AI Chatbot Integratie</h3>
                        <p>Voeg een slimme chatbot toe aan je website.</p>
                    </div>
                    <span class="workflow-badge">4 stappen</span>
                </div>
                <div class="workflow-card">
                    <div class="workflow-icon">üìß</div>
                    <div class="workflow-content">
                        <h3>Email Marketing Systeem</h3>
                        <p>Nieuwsbrief signup, templates en automatische flows.</p>
                    </div>
                    <span class="workflow-badge">5 stappen</span>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div class="content-section" id="settings-section">
            <div class="settings-grid">
                <div class="settings-card">
                    <h3><i class="fas fa-key"></i> API Configuratie</h3>
                    <div class="setting-item">
                        <div class="setting-label">
                            OpenAI API Key
                            <small>Voor AI-powered features</small>
                        </div>
                        <button class="btn btn-primary" onclick="openApiKeyModal()">Configureer</button>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">
                            API Status
                            <small>Verbindingsstatus</small>
                        </div>
                        <span class="api-status disconnected" id="settingsApiStatus">
                            <i class="fas fa-times-circle"></i> Niet verbonden
                        </span>
                    </div>
                </div>
                <div class="settings-card">
                    <h3><i class="fas fa-user"></i> Account</h3>
                    <div class="setting-item">
                        <div class="setting-label">
                            Abonnement
                            <small>Je huidige plan</small>
                        </div>
                        <span class="workflow-badge">Premium</span>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">
                            Blueprints gebruikt
                            <small>Deze maand</small>
                        </div>
                        <span style="color: var(--text2)">12 / ‚àû</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Blueprint Modal -->
<div class="blueprint-modal-overlay" id="blueprintModal">
    <div class="blueprint-modal">
        <button class="modal-close" onclick="closeBlueprint()"><i class="fas fa-times"></i></button>
        <div class="modal-header">
            <div class="modal-icon" id="modalIcon">üõí</div>
            <div class="modal-title">
                <h2 id="modalTitle">Complete Webshop</h2>
                <p id="modalDesc">Productpagina's, winkelwagen, checkout en betalingsflow.</p>
            </div>
        </div>
        <div class="modal-body">
            <div class="modal-section">
                <h4>Wat je krijgt</h4>
                <ul class="feature-list" id="modalFeatures">
                    <li><i class="fas fa-check"></i> Responsieve productpagina's</li>
                    <li><i class="fas fa-check"></i> Winkelwagen functionaliteit</li>
                    <li><i class="fas fa-check"></i> Veilige checkout flow</li>
                    <li><i class="fas fa-check"></i> Stripe/Mollie integratie</li>
                </ul>
            </div>
            <button class="use-blueprint-btn" onclick="useBlueprint()">
                <i class="fas fa-rocket"></i> Gebruik deze Blueprint
            </button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Tab Navigation
function showSection(section) {
    document.querySelectorAll('.dashboard-tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
    
    event.currentTarget.classList.add('active');
    document.getElementById(section + '-section').classList.add('active');
}

// Blueprint Filter
function filterBlueprints(category) {
    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
    event.currentTarget.classList.add('active');
    
    document.querySelectorAll('.blueprint-card').forEach(card => {
        if (category === 'all' || card.dataset.category === category) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
}

// Blueprint Modal
const blueprintData = {
    webshop: { icon: 'üõí', title: 'Complete Webshop', desc: 'Productpagina\'s, winkelwagen, checkout en betalingsflow.', features: ['Responsieve productpagina\'s', 'Winkelwagen functionaliteit', 'Veilige checkout flow', 'Stripe/Mollie integratie'] },
    dashboard: { icon: 'üìä', title: 'Analytics Dashboard', desc: 'Real-time grafieken, KPI\'s en interactieve data-visualisaties.', features: ['Interactieve grafieken', 'KPI widgets', 'Data filtering', 'Export mogelijkheden'] },
    blog: { icon: '‚úçÔ∏è', title: 'SEO Blog Engine', desc: 'Blog met categorie√´n, tags, sitemap en automatische meta-tags.', features: ['Categorie√´n & tags', 'Automatische SEO', 'Sitemap generatie', 'Social sharing'] },
    booking: { icon: 'üìÖ', title: 'Afspraken Systeem', desc: 'Kalender, tijdslots, bevestigingsmails en herinneringen.', features: ['Kalender weergave', 'Tijdslots beheer', 'Email bevestigingen', 'Herinneringen'] },
    crm: { icon: 'üë•', title: 'Klanten CRM', desc: 'Contactbeheer, deals tracking en communicatiegeschiedenis.', features: ['Contact management', 'Deal pipeline', 'Notities & taken', 'Communicatielogboek'] },
    api: { icon: '‚ö°', title: 'REST API', desc: 'Complete API met auth, CRUD endpoints en documentatie.', features: ['JWT authenticatie', 'CRUD endpoints', 'Rate limiting', 'API documentatie'] },
    landing: { icon: 'üöÄ', title: 'Landing Page', desc: 'Converterende landingspagina met lead capture en analytics.', features: ['Hero sectie', 'Features grid', 'Testimonials', 'Lead capture form'] },
    invoice: { icon: 'üßæ', title: 'Factuur Generator', desc: 'Professionele facturen maken en als PDF exporteren.', features: ['Factuur templates', 'PDF export', 'Klantenbeheer', 'Automatische nummering'] },
    portfolio: { icon: 'üé®', title: 'Portfolio Website', desc: 'Showcase je werk met projectgalerij en contactformulier.', features: ['Project galerij', 'Lightbox preview', 'Contactformulier', 'Over mij sectie'] }
};

function openBlueprint(id) {
    const data = blueprintData[id];
    if (!data) return;
    
    document.getElementById('modalIcon').textContent = data.icon;
    document.getElementById('modalTitle').textContent = data.title;
    document.getElementById('modalDesc').textContent = data.desc;
    document.getElementById('modalFeatures').innerHTML = data.features.map(f => `<li><i class="fas fa-check"></i> ${f}</li>`).join('');
    document.getElementById('blueprintModal').classList.add('active');
}

function closeBlueprint() {
    document.getElementById('blueprintModal').classList.remove('active');
}

function useBlueprint() {
    closeBlueprint();
    window.location.href = '/studio';
}

// Check API Key status
async function checkApiStatus() {
    try {
        const res = await fetch('/api/check-key');
        const data = await res.json();
        const badges = document.querySelectorAll('.api-status');
        badges.forEach(badge => {
            if (data.has_key) {
                badge.className = 'api-status connected';
                badge.innerHTML = '<i class="fas fa-check-circle"></i> Verbonden';
            } else {
                badge.className = 'api-status disconnected';
                badge.innerHTML = '<i class="fas fa-exclamation-circle"></i> Niet verbonden';
            }
        });
    } catch(e) {}
}

// Init
checkApiStatus();

// Close modal on escape
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeBlueprint(); });
document.getElementById('blueprintModal').addEventListener('click', e => { if (e.target.id === 'blueprintModal') closeBlueprint(); });
</script>
{% endblock %}
